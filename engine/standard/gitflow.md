# git 开发规范

使用 Git 作为版本控制管理工具

![基本流程](/gitflow.png)

## 分支规范

**1. master 分支**

- 场景: 前端代码在经过完整测试流程后, 会合并到 master 分支, 并使用 tag 标记应用版本
- tag 规范: realse/项目名称-yyyymmdd
- 人员: 有项目负责人进行审核合并, 普通开发者无权限

**2. develop 分支**

开发者主要工作分支, 最新的特性或 bug 修复都会提到这个分支. 开发者完成相关需求后, 提交到该分支进行功能验证, 验证完成后再合到 test 分支

**3. test 分支**

测试分支, 开发人员验证后的代码会合并到该分支, 测试人员在该分支进行功能测试.

**4. feature 分支**

涉及多人协作或者大功能的开发, 从 test 分支 checkout 出独立的 feature 分支, 避免干扰 test 分支.

- 场景
  - 涉及多人协作: 团队多个成员在同一个项目下负责开发不同的功能, 这时候每个成员在自己的 feature 分支独立开发.
  - 大功能开发: 大功能开发跨越周期比较长, 需要多次迭代才会稳定. 这时候在独立的分支上开发. 方便跟踪历史记录, 也免于干扰 test 分支的迭代和发布
- 合并时机

  当 feature 功能代码编写完成, 提到 dev 分支进行自测, 完成后合并到 test 分支, 通过测试后, 删除该分支. 后续 bug 和功能基于 test 分支开发

**5. uat 预生产分支**

预览分支, 经过部门审核通过后, 合并到 master 分支上线发布.

## [commit 规范](./code#提交规范-commitlint)

**格式**

`<type>(<scope>): <subject>`

**type(必须)**

用于说明 git commit 的类别，只允许以下的标识。

- feat：新功能（feature）
- fix： 修复 bug
- docs：文档
- style：格式（不影响代码运行的变动）
- refactor：重构（即不是新增功能，也不是修改 bug 的代码变动）
- perf：优化相关，比如提升性能、体验
- test：增加测试
- chore：构建过程或辅助工具的变动
- revert：回滚到上一个版本
- merge：代码合并
- sync：同步主线或分支的 Bug

**scope(可选)**

scope 用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同

**subject(必须)**

subject 是 commit 目的的简短描述，结尾不需要加符号

**意义**

- 便于程序员对提交历史进行追溯，了解发生了什么情况
- 格式化的 commit message 才可以用于自动化输出 Change log
